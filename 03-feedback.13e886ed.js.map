{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAgBC,SAASC,cAAc,kBAEvCC,EAAW,IAEM,WACrB,IAAIC,EACJ,IACEA,EAAaC,KAAKC,MAAMC,aAAaC,QAAQ,uB,CAC7C,MAAOC,GACPC,QAAQC,IAAIF,E,CAId,GAAmB,OAAfL,EAGJ,IAAK,IAAMQ,KAAQR,EACJ,UAATQ,EACFZ,EAAca,SAASD,GAAME,MAAQV,EAAWQ,GAGhDT,EAASS,GAAQR,EAAWQ,E,CAKlCG,GAEA,IAAMC,GAAoB,EAAAlB,EAAAmB,WAAS,SAAAC,GACjC,IAAMC,EAAaD,EAAXC,OACFC,EAAYD,EAAOE,KACnBC,EAAaH,EAAOL,MAC1BX,EAASiB,GAAaE,EACtBf,aAAagB,QAAQ,sBAAuBlB,KAAKmB,UAAUrB,G,GAC1D,KAgBHH,EAAcyB,iBAAiB,QAAST,GACxChB,EAAcyB,iBAAiB,UAfV,SAAAP,GACnBA,EAAMQ,iBAEN,IAAMC,EAAgB,CACpBC,MAAO5B,EAAca,SAASe,MAAMd,MACpCe,QAAS7B,EAAca,SAASgB,QAAQf,OAG1CJ,QAAQC,IAAIgB,GAEZpB,aAAauB,WAAW,uBACxB9B,EAAc+B,O","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst contactFormEl = document.querySelector('.feedback-form');\n\nconst userData = {};\n\nconst fillFormFields = () => {\n  let dataFromLS;\n  try {\n    dataFromLS = JSON.parse(localStorage.getItem('feedback-form-state'));\n  } catch (error) {\n    console.log(error);\n  }\n  //   console.dir(contactFormEl.elements);\n  //     console.dir(dataFromLS);\n  if (dataFromLS === null) {\n    return;\n  }\n  for (const prop in dataFromLS) {\n    if (prop === 'email') {\n      contactFormEl.elements[prop].value = dataFromLS[prop];\n      //   Перебираем полученный распарсенный JSON массив из функции onFormFieldChange (данные, которые ввел пользователь. А так как elements (ключи) contactFormEl совпадают с ключами dataFromLS, присваиваем значение (value) этих ключей через [prop].value)\n    } else {\n      userData[prop] = dataFromLS[prop];\n    }\n  }\n};\n\nfillFormFields();\n\nconst onFormFieldChange = throttle(event => {\n  const { target } = event;\n  const fieldName = target.name;\n  const fieldValue = target.value;\n  userData[fieldName] = fieldValue;\n  localStorage.setItem('feedback-form-state', JSON.stringify(userData));\n}, 500);\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  const submittedData = {\n    email: contactFormEl.elements.email.value,\n    message: contactFormEl.elements.message.value,\n  };\n\n  console.log(submittedData);\n\n  localStorage.removeItem('feedback-form-state');\n  contactFormEl.reset();\n};\n\ncontactFormEl.addEventListener('input', onFormFieldChange);\ncontactFormEl.addEventListener('submit', onFormSubmit);\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$contactFormEl","document","querySelector","$b00c40859be242c5$var$userData","dataFromLS","JSON","parse","localStorage","getItem","error","console","log","prop","elements","value","$b00c40859be242c5$var$fillFormFields","$b00c40859be242c5$var$onFormFieldChange","throttle","event","target","fieldName","name","fieldValue","setItem","stringify","addEventListener","preventDefault","submittedData","email","message","removeItem","reset"],"version":3,"file":"03-feedback.13e886ed.js.map"}